<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head.ejs') %>
    <title>Blog</title>
</head>
    <body style="background-color:rgb(234, 234, 234) ;">
        <%- include('./partials/nav.ejs') %>

            <div class="container mt-4" 
            style= "border: 1px solid rgb(0, 0, 0);
                    padding: 2em;
                    border-radius: 20px;
                    display: flex; 
                    flex-direction: column;
                    height: fit-content;
                    align-items: center;
                    background-color: rgb(255, 255, 255);
                    ">
                <h1><%= blog.title  %></h1>
                <img src="<%= blog.coverImageUrl %>" width="500em">
                <p><%= blog.body %></pr>
            </div>

            <div class="container mt-4">
                <img src="<%= blog.createdBy.profileImageURL %>"  width="80em"> 
                <h5>
                    <%= blog.createdBy.fullName %> <br/> <%= blog.createdBy.createdAt %>
                </h5>
            </div>
            <% if(locals.user) { %>
            <div class="container mt-3">
                <h1>Comment</h1>
                <form action="/blog/comment/<%= blog._id %>" method="post">
                    <div class="mb-3">
                      <input type="text" placeholder="Enter your comment..." class="form-control" id="content" name="content" aria-describedby="emailHelp">
                    </div>
                    <button type="submit" class="btn btn-primary">ADD</button>
                  </form>
            </div>
            <% } %>

            <div class="container mt-3" style="background-color: rgb(255, 255, 255); border-radius: 20px; padding: 2em;">
                <h3>Comments ( <%= comments.length %> )</h3>
                <% comments.forEach(comment=>{ %>
                    <div>
                        <img src="<%= comment.createdBy.profileImageURL %>" width="50em">
                        <p><%= comment.createdBy.fullName %></p>
                        <pre><%= comment.content%></pre>
                    </div>
                    <div style="height: 1px; width: 100% ; background-color: rgb(83, 83, 83);"></div>
                <%}) %>
            </div>

        <%- include('./partials/scripts.ejs')%>
    </body>
</html>